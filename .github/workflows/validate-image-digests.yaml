name: Validate Image Digests

on:
  pull_request:
    paths:
      - '.github/workflows/validate-image-digests.yaml'
      - 'Makefile'
      - 'hack/validate-image-digests.sh'
      - 'Dockerfile'
      - '**/*bundle.Dockerfile'
      - '.rhdh/docker/Dockerfile'

jobs:
  validate-image-digests:
    name: Validate Image Digests
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@de0fac2e4500dabe0009e67214ff5f5447ce83dd # v6

      - name: Run validation script
        run: make validate-image-digests
